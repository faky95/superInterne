{% extends '::base.html.twig' %}

{% block content -%}
<!-- heading -->
<div class="heading">
	<h3>{% block page_title %} Liste des actions cyclique {% endblock %}</h3>                    
</div>
<!-- End .heading-->
					<div class="row">
                        <div class="col-lg-12">
                        	{% if has_rights('ROLE_ANIMATEUR') %}
	                        	<div class="row">
									<div class="col-lg-4">
										 <a target="_blank" href="{{ path('actioncyclique_new') }}"><button class="btn btn-warning"><span class="icon16 icomoon-icon-plus white"></span> Ajout d'une action cyclique </button></a> 
										 <div class="marginB10"></div>
									</div><!-- End .span4 -->
								</div>
							{% endif %}
                            <div class="panel panel-default gradient">
                                <div class="panel-heading">
                                    <h4>
                                        <span>Liste des actions cycliques</span>
                                    </h4>
                                </div>
                                <div class="panel-body noPad clearfix">
                                    <table id="actionTable" cellpadding="0" cellspacing="0" border="0" class=" display table table-bordered" width="100%">
                                        <thead>
                                            <tr>
                                               <th>Instance</th>	
                                               <th>Action</th>
											   <th>Porteur</th>
											   <th>Etat</th>
 											   <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        	{% for entity in entities %}
                                        	{% set actionCycliqueKey  =  entity.action.actionStatut|length - 1 %}
 											{% set statut 			  =  entity.action.actionStatut[actionCycliqueKey].statut.libelle %}
                                        	
	                                        	<tr>
	                                        		<td>{{ entity.action.instance }}</td>
	                                        		<td>{{ entity.action.libelle }}</td>
	                                        		<td>{{ entity.action.porteur }}</td>
	                                        		<td>{{ statut }}</td>
	                                        		<td align="center" width="200px">
														<div class="btn-group">
												      		<a class="btn btn-default" href="{{ path('actioncyclique_show', {'id': entity.id}) }}" title="DÃ©tails sur l'action "><span class="icomoon-icon-eye"></span></a>
												          	<a class="btn btn-default" href="#" title="Modifier l'action"><span class="icomoon-icon-pencil-3"></span></a>
												          	<a class="btn btn-default" href="#" title="Supprimer l'action"><span class="icomoon-icon-remove-4"></span></a>
											       		</div>
													</td>
	                                        	</tr>
                                        	{% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div><!-- End .panel -->

                        </div><!-- End .span12 -->

			</div><!-- End .row --> 
 {% endblock %}